<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE category SYSTEM "../rusterix.dtd">
<!--
  ASTERIX Category 048 - Monoradar Target Reports
  
  This is a simplified but realistic implementation of CAT048.
  Based on ASTERIX specification.
-->
<category id="048">
    
    <!-- I048/010: Data Source Identifier -->
    <item id="010" frn="0">
        <fixed bytes="2">
            <field name="sac" bits="8"/>
            <field name="sic" bits="8"/>
        </fixed>
    </item>
    
    <!-- I048/020: Target Report Descriptor -->
    <item id="020" frn="1">
        <extended bytes="1">
            <part index="0">
                <enum name="typ" bits="3">
                    <value name="NO_DETECTION" value="0"/>
                    <value name="SINGLE_PSR" value="1"/>
                    <value name="SINGLE_SSR" value="2"/>
                    <value name="SSR_PSR" value="3"/>
                    <value name="SINGLE_MDS" value="4"/>
                    <value name="MDS_PSR" value="5"/>
                    <value name="MDS_SSR" value="6"/>
                    <value name="MDS_PSR_SSR" value="7"/>
                </enum>
                <field name="sim" bits="1"/>
                <field name="rdp" bits="1"/>
                <field name="spi" bits="1"/>
                <field name="rab" bits="1"/>
            </part>
        </extended>
    </item>
    
    <!-- I048/030: Warning/Error Conditions -->
    <item id="030" frn="2">
        <extended bytes="1">
            <part index="0">
                <field name="w1" bits="7"/>
            </part>
        </extended>
    </item>
    
    <!-- I048/040: Measured Position in Polar Coordinates -->
    <item id="040" frn="3">
        <fixed bytes="4">
            <field name="rho" bits="16"/>
            <field name="theta" bits="16"/>
        </fixed>
    </item>
    
    <!-- I048/042: Calculated Position in Cartesian Coordinates -->
    <item id="042" frn="4">
        <fixed bytes="4">
            <field name="x" bits="16"/>
            <field name="y" bits="16"/>
        </fixed>
    </item>
    
    <!-- I048/050: Mode-2 Code in Octal Representation -->
    <item id="050" frn="5">
        <fixed bytes="2">
            <field name="v" bits="1"/>
            <field name="g" bits="1"/>
            <field name="l" bits="1"/>
            <spare bits="1"/>
            <field name="mode2" bits="12"/>
        </fixed>
    </item>
    
    <!-- I048/055: Mode-1 Code in Octal Representation -->
    <item id="055" frn="6">
        <fixed bytes="1">
            <field name="v" bits="1"/>
            <field name="g" bits="1"/>
            <field name="l" bits="1"/>
            <field name="mode1" bits="5"/>
        </fixed>
    </item>
    
    <!-- I048/060: Mode-2 Code Confidence Indicator -->
    <item id="060" frn="7">
        <fixed bytes="2">
            <spare bits="4"/>
            <field name="qc2" bits="12"/>
        </fixed>
    </item>
    
    <!-- I048/065: Mode-1 Code Confidence Indicator -->
    <item id="065" frn="8">
        <fixed bytes="1">
            <spare bits="3"/>
            <field name="qc1" bits="5"/>
        </fixed>
    </item>
    
    <!-- I048/070: Mode-3/A Code in Octal Representation -->
    <item id="070" frn="9">
        <fixed bytes="2">
            <field name="v" bits="1"/>
            <field name="g" bits="1"/>
            <field name="l" bits="1"/>
            <spare bits="1"/>
            <field name="mode3a" bits="12"/>
        </fixed>
    </item>
    
    <!-- I048/080: Mode-3/A Code Confidence Indicator -->
    <item id="080" frn="10">
        <fixed bytes="2">
            <spare bits="4"/>
            <field name="qc4" bits="12"/>
        </fixed>
    </item>
    
    <!-- I048/090: Flight Level in Binary Representation -->
    <item id="090" frn="11">
        <fixed bytes="2">
            <field name="v" bits="1"/>
            <field name="g" bits="1"/>
            <spare bits="2"/>
            <field name="flight_level" bits="12"/>
        </fixed>
    </item>
    
    <!-- I048/100: Mode-C Code and Code Confidence Indicator -->
    <item id="100" frn="12">
        <fixed bytes="4">
            <field name="v" bits="1"/>
            <field name="g" bits="1"/>
            <spare bits="2"/>
            <field name="mode_c" bits="12"/>
            <spare bits="4"/>
            <field name="qc" bits="12"/>
        </fixed>
    </item>
    
    <!-- I048/110: Height Measured by 3D Radar -->
    <item id="110" frn="13">
        <fixed bytes="2">
            <field name="height_3d" bits="16"/>
        </fixed>
    </item>
    
    <!-- I048/120: Radial Doppler Speed -->
    <item id="120" frn="14">
        <compound>
            <!-- CAL: Calculated Doppler Speed -->
            <fixed bytes="1">
                <field name="cal_d" bits="1"/>
                <spare bits="6"/>
                <field name="cal" bits="1"/>
            </fixed>
            
            <!-- RDS: Raw Doppler Speed -->
            <fixed bytes="6">
                <field name="dop" bits="16"/>
                <field name="amb" bits="16"/>
                <field name="frq" bits="16"/>
            </fixed>
        </compound>
    </item>
    
    <!-- I048/130: Radar Plot Characteristics -->
    <item id="130" frn="15">
        <compound>
            <!-- SRL: SSR Plot Runlength -->
            <fixed bytes="1">
                <field name="srl" bits="8"/>
            </fixed>
            
            <!-- SRR: Number of Received Replies for M(SSR) -->
            <fixed bytes="1">
                <field name="srr" bits="8"/>
            </fixed>
            
            <!-- SAM: Amplitude of M(SSR) -->
            <fixed bytes="1">
                <field name="sam" bits="8"/>
            </fixed>
            
            <!-- PRL: Primary Plot Runlength -->
            <fixed bytes="1">
                <field name="prl" bits="8"/>
            </fixed>
            
            <!-- PAM: Amplitude of Primary Plot -->
            <fixed bytes="1">
                <field name="pam" bits="8"/>
            </fixed>
            
            <!-- RPD: Difference in Range between PSR and SSR -->
            <fixed bytes="1">
                <field name="rpd" bits="8"/>
            </fixed>
            
            <!-- APD: Difference in Azimuth between PSR and SSR -->
            <fixed bytes="1">
                <field name="apd" bits="8"/>
            </fixed>
        </compound>
    </item>
    
    <!-- I048/140: Time of Day -->
    <item id="140" frn="16">
        <fixed bytes="3">
            <field name="time_of_day" bits="24"/>
        </fixed>
    </item>
    
    <!-- I048/161: Track Number -->
    <item id="161" frn="17">
        <fixed bytes="2">
            <spare bits="4"/>
            <field name="track_number" bits="12"/>
        </fixed>
    </item>
    
    <!-- I048/170: Track Status -->
    <item id="170" frn="18">
        <extended bytes="1">
            <part index="0">
                <field name="cnf" bits="1"/>
                <enum name="rad" bits="2">
                    <value name="PSR" value="0"/>
                    <value name="SSR" value="1"/>
                    <value name="CMB" value="2"/>
                </enum>
                <field name="dou" bits="1"/>
                <field name="mah" bits="1"/>
                <enum name="cdm" bits="2">
                    <value name="MAINTAINING" value="0"/>
                    <value name="CLIMBING" value="1"/>
                    <value name="DESCENDING" value="2"/>
                </enum>
            </part>
        </extended>
    </item>
    
    <!-- I048/200: Calculated Track Velocity in Polar Coordinates -->
    <item id="200" frn="19">
        <fixed bytes="4">
            <field name="ground_speed" bits="16"/>
            <field name="heading" bits="16"/>
        </fixed>
    </item>
    
    <!-- I048/210: Track Quality -->
    <item id="210" frn="20">
        <fixed bytes="4">
            <field name="sigma_x" bits="8"/>
            <field name="sigma_y" bits="8"/>
            <field name="sigma_v" bits="8"/>
            <field name="sigma_h" bits="8"/>
        </fixed>
    </item>
    
    <!-- I048/220: Aircraft Address -->
    <item id="220" frn="21">
        <fixed bytes="3">
            <field name="aircraft_address" bits="24"/>
        </fixed>
    </item>
    
    <!-- I048/230: Communications/ACAS Capability and Flight Status -->
    <item id="230" frn="22">
        <fixed bytes="2">
            <enum name="com" bits="3">
                <value name="NO_COMM" value="0"/>
                <value name="COMM_A_B" value="1"/>
                <value name="COMM_A_B_UPLINK" value="2"/>
                <value name="COMM_A_B_UPLINK_DOWNLINK" value="3"/>
            </enum>
            <enum name="stat" bits="3">
                <value name="NO_ALERT_NO_SPI_AIRBORNE" value="0"/>
                <value name="NO_ALERT_NO_SPI_GROUND" value="1"/>
                <value name="ALERT_NO_SPI_AIRBORNE" value="2"/>
                <value name="ALERT_NO_SPI_GROUND" value="3"/>
                <value name="ALERT_SPI" value="4"/>
                <value name="NO_ALERT_SPI" value="5"/>
            </enum>
            <spare bits="2"/>
            <field name="mssc" bits="1"/>
            <field name="arc" bits="1"/>
            <field name="aic" bits="1"/>
            <field name="b1a" bits="1"/>
            <field name="b1b" bits="4"/>
        </fixed>
    </item>
    
    <!-- I048/240: Aircraft Identification -->
    <item id="240" frn="23">
        <fixed bytes="6">
            <field name="aircraft_id" bits="48"/>
        </fixed>
    </item>
    
    <!-- I048/250: Mode S MB Data -->
    <item id="250" frn="24">
        <repetitive bytes="8" counter="1">
            <field name="mb_data" bits="56"/>
            <field name="bds1" bits="4"/>
            <field name="bds2" bits="4"/>
        </repetitive>
    </item>
    
    <!-- I048/260: ACAS Resolution Advisory Report -->
    <item id="260" frn="25">
        <fixed bytes="7">
            <field name="mb_data" bits="56"/>
        </fixed>
    </item>
    
    <!-- I048/SP: Special Purpose Field -->
    <item id="000" frn="26">
        <explicit bytes="1">
            <field name="sp_data" bits="8"/>
        </explicit>
    </item>
    
</category>